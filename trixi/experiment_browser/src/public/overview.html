<html>

<head>

    <title>TRIXI - {{ title }}</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/custom.css') }}"/>
    <link rel="shortcut icon" type="image/png" href="{{ url_for('static', filename='assets/trixi-icon.png') }}"/>


</head>

<body>
<!-- <div class="container-fluid">
    <h1>{{ title }}</h1>
</div> -->

<div class="content">

    <table id="overviewTable" class="table table-bordered" cellspacing="0" width="100%">
        <thead>
        <tr>
            <th>Directory</th>
            <th class="center-elem">Name</th>
            <th class="center-elem">Time</th>
            <th class="center-elem">State</th>
            <th class="center-elem">Epochs</th>
            {% for c in ccols1 %}
            <th style="background-color: #dcedc8" class="center-elem">{{ c }}</th>
            {% endfor %}
            {% for c in ccols2 %}
            <th style="background-color: #dcedc8" class="center-elem">{{ c }}</th>
            {% endfor %}

            {% for c in rcols %}
            <th style="background-color: #fff3e0" class="center-elem">{{ c }}</th>
            {% endfor %}
        </tr>
        </thead>
        <tbody>
        {% for dir, star ,name, time, desc, epochs, config_vals, result_vals in rows %}
        <tr dir_name="{{ dir }}">
            <th>
                {% if star %}
                <a class="star_element" href="" style="color:black; margin-right: 0.5em;" dir_name="{{ dir }}"><i
                        class="material-icons"
                        style="vertical-align: middle;">star</i></a><a
                    href="/experiment?exp={{ dir }}" style="vertical-align: middle" target="_blank">{{ dir }}</a>
                {% else %}
                <a class="star_element" href="" style="color:black; margin-right: 0.5em;" dir_name="{{ dir }}"><i
                        class="material-icons"
                        style="vertical-align: middle;">star_border</i></a><a
                    href="/experiment?exp={{ dir }}" style="vertical-align: middle" target="_blank">{{ dir }}</a>
                {% endif %}
            </th>
            <td>
                <span>{{ name }}</span>
                <a class="edit_name" href="" style="color:black;" data-toggle="modal" data-target="#renameModal"
                   data-name="{{name}}" data-dir="{{dir}}">
                    <i class="material-icons" style="float: right;">edit</i>
                </a>
            </td>
            <td>{{ time }}</td>
            <td>{{ desc }}</td>
            <td>{{ epochs }}</td>
            {% for el, el_short in config_vals %}
            <td title="{{ el }}">{{ el_short }}</td>
            {% endfor %}
            {% for el, el_short in result_vals %}
            <td title="{{ el }}">{{ el_short }}</td>
            {% endfor %}
        </tr>
        {% endfor %}
        </tbody>
        <tfoot>
        <tr>
            <th>Dir</th>
            <th>Name</th>
            <th>Time</th>
            <th>State</th>
            <th>Epochs</th>
            {% for c in ccols1 %}
            <th>{{ c }}</th>
            {% endfor %}
            {% for c in ccols2 %}
            <th>{{ c }}</th>
            {% endfor %}
            {% for c in rcols %}
            <th>{{ c }}</th>
            {% endfor %}
        </tr>
        </tfoot>
    </table>
    <div class="container-fluid">
        <div class="row">
            <div class="col-auto" style="padding-right: 2px">
                <a role="button" class="btn btn-outline-secondary toggle-config">Toggle all</a><br><br>
            </div>
            <div class="col" style="padding-left: 2px">
                <div>
                    {% for c in ccols1 %}
                    <a role="button" class="btn btn-outline-success toggle-vis" data-column="{{ loop.index + 4 }}"
                       data-type="config">{{ c }}</a>
                    {% endfor %}
                </div>
                <div div class="collapse" id="collapseExample">
                    {% for c in ccols2 %}
                    <a role="button" class="btn btn-outline-success toggle-vis"
                       data-column="{{ loop.index + ccols1|length + 4 }}"
                       data-type="config">{{ c }}</a>
                    {% endfor %}
                </div>
            </div>
            <div class="col-auto" style="padding-left: 2px">
                <a role="button" class="btn btn-outline-secondary" data-toggle="collapse" href="#collapseExample">+/-
                </a>
            </div>
        </div>

        <div class="row" style="margin-top: 5px">
            <div class="col-auto" style="padding-right: 2px">
                <a role="button" class="btn btn-outline-secondary toggle-result">Toggle all</a>
            </div>
            <div class="col" style="padding-left: 2px">
                {% for c in rcols %}
                <a role="button" class="btn btn-outline-warning toggle-vis"
                   data-column="{{ loop.index + ccols1|length + ccols2|length + 4 }}"
                   data-type="result">{{ c }}</a>
                {% endfor %}
            </div>
        </div>
        <div class="row" style="margin-top: 5px">
            <div class="col-auto">
                <button type="button" class="btn btn-outline-secondary" data-toggle="modal" data-target="#switchModal">
                    Switch to...
                </button>
            </div>
        </div>
    </div>


</div>

<!-- Modal -->
<div class="modal fade" id="switchModal" tabindex="-1" role="dialog" aria-labelledby="switchModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="switchModalLabel">Switch to another directory</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <a href="/">HOME</a>
                <hr>
                {% for e in noexp %}
                <a href="/overview?dir={{ e }}">{{ e }}</a><br>
                {% endfor %}
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="text-center" style="margin: 2em">
    <img src="{{ url_for('static', filename='assets/trixi-small.png') }}" width="50px"/>
</div>


<!-- Modal -->
<div class="modal fade" id="renameModal" tabindex="-1" role="dialog" aria-labelledby="renameModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="renameModalLabel">Change Name</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <label class="col-form-label">Name:</label>
                <input type="text" class="form-control" id="experiment-rename-input">
            </div>
            <div class="modal-footer">
                <a type="button" class="btn btn-secondary" data-dismiss="modal">Close</a>
                <a type="button" class="btn btn-primary" id="rename-modal-button" data-dismiss="modal">Change Name</a>
            </div>
        </div>
    </div>
</div>


<!-- Modal -->
<div class="modal fade" id="combineModal" tabindex="-1" role="dialog" aria-labelledby="renameModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="combineModalLabel">Combine Experiments</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <label class="col-form-label">Name:</label>
                <input type="text" class="form-control" id="combi-name-input">
                <br>
                 <div style="float: right;">
                    <label class="switch">
                        <input type="checkbox"  id="combi-save-input" checked>
                        <span class="slider round"></span>
                    </label>
                    <div>Save</div>
                </div>


            </div>
            <div class="modal-footer">
                <a type="button" class="btn btn-secondary" data-dismiss="modal">Close</a>
                <a type="button" class="btn btn-primary" id="combi-modal-button" data-dismiss="modal">Combine</a>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="combineModal2" tabindex="-1" role="dialog" aria-labelledby="renameModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="combineModalLabel2">Combine All Experiments</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <label class="col-form-label">Name:</label>
                <input type="text" class="form-control" id="combi-name-input2">
                <br>
                Group By:
                <div id="combi-checkboxlist">
                    {% for c in ccols1 %}
                    <div><input type="checkbox" value="{{ c }}" class="chk"> {{ c }}</div>
                    {% endfor %}

                </div>

            </div>
            <div class="modal-footer">
                <a type="button" class="btn btn-secondary" data-dismiss="modal">Close</a>
                <a type="button" class="btn btn-primary" id="combi-modal-button2" data-dismiss="modal">Combine&Save</a>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="LoadingModal" tabindex="-1" role="dialog" aria-labelledby="renameModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Loading...</h5>
                 <i class="fa fa-circle-notch fa-spin" style="font-size:24px"></i>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="ErrorModal" tabindex="-1" role="dialog" aria-labelledby="renameModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Error</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>An Error has occurred. Please reload.</p>
            </div>
            <div class="modal-footer">
                <a type="button" class="btn btn-secondary" data-dismiss="modal">Close</a>
            </div>
        </div>
    </div>
</div>

</body>

</html>
